# üî¨ Proxy Intelligence Pipeline ‚Äî –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

> **–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 2026-02-20  
> **–ü—Ä–æ–µ–∫—Ç:** `parcerproxy` ‚Äî –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –ø–∞—Ä—Å–µ—Ä/–∞–≥—Ä–µ–≥–∞—Ç–æ—Ä –ø—Ä–æ–∫—Å–∏

---

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [[#–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞]]
- [[#–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Äî —Å—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è]]
- [[#–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤]]
- [[#–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (config.py)]]
- [[#–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)]]
- [[#–ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (models.py)]]
- [[#–ö–æ–ª–ª–µ–∫—Ç–æ—Ä—ã (collectors/)]]
- [[#–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä (normalizer.py)]]
- [[#–í–∞–ª–∏–¥–∞—Ç–æ—Ä (validator.py)]]
- [[#–ì–µ–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (geo.py)]]
- [[#Pipeline ‚Äî –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä (pipeline.py)]]
- [[#–•—Ä–∞–Ω–∏–ª–∏—â–µ (storage.py)]]
- [[#–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (scheduler.py)]]
- [[#–°–µ—Ä–≤–∏—Å (service.py)]]
- [[#Telegram-–±–æ—Ç (bot.py)]]
- [[#–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (main.py)]]
- [[#–¢–µ—Å—Ç—ã]]
- [[#–ü–æ–ª–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã]]
- [[#–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è]]
- [[#–§–æ—Ä–º—É–ª–∞ —Å–∫–æ—Ä–∏–Ω–≥–∞]]

---

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**Proxy Intelligence Pipeline** ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–±–æ—Ä–∞, –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–æ–≤ –∏–∑ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤. –û—Å–Ω–æ–≤–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ ‚Äî **GitHub** (–ø–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º) –∏ **–ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ URL** —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ –ø—Ä–æ–∫—Å–∏.

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞:

```
1. –°–±–æ—Ä       ‚Üí –ò—â–µ—Ç –ø—Ä–æ–∫—Å–∏ –Ω–∞ GitHub –∏ –ø–æ URL-—Å–ø–∏—Å–∫–∞–º
2. –ü–∞—Ä—Å–∏–Ω–≥    ‚Üí –ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø—Ä–æ–∫—Å–∏-–∞–¥—Ä–µ—Å–∞ –∏–∑ —Å—ã—Ä–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (regex)
3. –í–∞–ª–∏–¥–∞—Ü–∏—è  ‚Üí –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∂–¥—ã–π –ø—Ä–æ–∫—Å–∏ –Ω–∞ –∂–∏–≤—É—á–µ—Å—Ç—å (TCP/HTTP)
4. –ì–µ–æ        ‚Üí –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç—Ä–∞–Ω—É –ø–æ IP
5. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è ‚Üí –û—Ç—Å–µ–∏–≤–∞–µ—Ç –ø–æ —á—ë—Ä–Ω–æ–º—É/–±–µ–ª–æ–º—É —Å–ø–∏—Å–∫—É —Å—Ç—Ä–∞–Ω
6. –•—Ä–∞–Ω–µ–Ω–∏–µ   ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ SQLite —Å upsert –∏ –∏—Å—Ç–æ—Ä–∏–µ–π –Ω–∞–±–ª—é–¥–µ–Ω–∏–π
7. –°–∫–æ—Ä–∏–Ω–≥    ‚Üí –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥ (score) –ø–æ latency + success_rate
8. –û—Ç—á—ë—Ç–Ω–æ—Å—Ç—å ‚Üí Telegram-–±–æ—Ç –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
```

### –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|-----------|-----------|
| HTTP-–∫–ª–∏–µ–Ω—Ç | `httpx` (async) |
| ORM / –ë–î | `SQLAlchemy 2.0` + SQLite |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö | `pydantic` (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö, –º–æ–¥–µ–ª–∏ ‚Äî dataclasses) |
| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | `python-dotenv` |
| –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ | `APScheduler` (BlockingScheduler) |
| Telegram-–±–æ—Ç | `python-telegram-bot 21.x` (—Å job-queue) |
| –¢–µ—Å—Ç—ã | `pytest` |

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ‚Äî —Å—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                      main.py                            ‚îÇ
‚îÇ  –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: run-once ‚îÇ daemon ‚îÇ run-bot ‚îÇ all-in-one ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ              ‚îÇ              ‚îÇ
       ‚ñº              ‚ñº              ‚ñº
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇpipeline ‚îÇ   ‚îÇscheduler ‚îÇ   ‚îÇ  bot.py ‚îÇ
  ‚îÇ .py     ‚îÇ   ‚îÇ  .py     ‚îÇ   ‚îÇ AdminBot‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ              ‚îÇ              ‚îÇ
       ‚îÇ         –≤—ã–∑—ã–≤–∞–µ—Ç        —Ä–∞–±–æ—Ç–∞–µ—Ç —Å
       ‚îÇ        pipeline           storage
       ‚îÇ              ‚îÇ              ‚îÇ
       ‚ñº              ‚ñº              ‚ñº
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ              storage.py                  ‚îÇ
  ‚îÇ  upsert_proxy, record_run, dashboard,   ‚îÇ
  ‚îÇ  enqueue_repo, top_alive –∏ –¥—Ä.           ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                       ‚îÇ
                       ‚ñº
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ         models.py  (SQLAlchemy)          ‚îÇ
  ‚îÇ  Proxy ‚îÇ Observation ‚îÇ RepoTask ‚îÇ        ‚îÇ
  ‚îÇ  PipelineRun                             ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Pipeline –≤–Ω—É—Ç—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ collectors/    ‚îÇ   ‚îÇ  normalizer.py   ‚îÇ
  ‚îÇ  github.py     ‚îÇ‚îÄ‚îÄ‚ñ∂‚îÇ  parse_candidates‚îÇ
  ‚îÇ  url_list.py   ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
                                ‚ñº
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ validator.py   ‚îÇ
                       ‚îÇ validate_many  ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ
                                ‚ñº
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇ   geo.py       ‚îÇ
                       ‚îÇ country_by_ip  ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
parcerproxy/
‚îú‚îÄ‚îÄ .env.example          # –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt      # Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md             # –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py       # –ü—É—Å—Ç–æ–π, –º–∞—Ä–∫–µ—Ä –ø–∞–∫–µ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ main.py           # CLI —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (argparse)
‚îÇ   ‚îú‚îÄ‚îÄ config.py         # Dataclass Settings + –∑–∞–≥—Ä—É–∑–∫–∞ .env
‚îÇ   ‚îú‚îÄ‚îÄ models.py         # SQLAlchemy ORM –º–æ–¥–µ–ª–∏ (4 —Ç–∞–±–ª–∏—Ü—ã)
‚îÇ   ‚îú‚îÄ‚îÄ collectors/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py       # ABC Collector (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ github.py     # GitHubCodeCollector (–≥–ª—É–±–æ–∫–∏–π –ø–æ–∏—Å–∫)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ url_list.py   # URLListCollector (–ø—Ä–æ—Å—Ç–æ–π HTTP GET)
‚îÇ   ‚îú‚îÄ‚îÄ normalizer.py     # Regex-–ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ–∫—Å–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ validator.py      # Async –ø—Ä–æ–≤–µ—Ä–∫–∞ –∂–∏–≤—É—á–µ—Å—Ç–∏ –ø—Ä–æ–∫—Å–∏
‚îÇ   ‚îú‚îÄ‚îÄ geo.py            # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω—ã –ø–æ IP (ipapi.co)
‚îÇ   ‚îú‚îÄ‚îÄ pipeline.py       # –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä: collect ‚Üí parse ‚Üí validate ‚Üí save
‚îÇ   ‚îú‚îÄ‚îÄ storage.py        # –°–ª–æ–π —Ä–∞–±–æ—Ç—ã —Å –ë–î (upsert, stats, queue)
‚îÇ   ‚îú‚îÄ‚îÄ scheduler.py      # APScheduler daemon-—Ä–µ–∂–∏–º
‚îÇ   ‚îú‚îÄ‚îÄ service.py        # –°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π (–ø—Ä–æ—Å–ª–æ–π–∫–∞ –ø–µ—Ä–µ–¥ API)
‚îÇ   ‚îî‚îÄ‚îÄ bot.py            # Telegram admin-–±–æ—Ç (–º–µ–Ω—é, –∫–æ–º–∞–Ω–¥—ã, –æ—Ç—á—ë—Ç—ã)
‚îî‚îÄ‚îÄ tests/
‚îî‚îÄ‚îÄ tests/
    ‚îú‚îÄ‚îÄ test_normalizer_extended.py # –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ regex –∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–≤ —Ç.—á. Base64)
    ‚îú‚îÄ‚îÄ test_validator_routing.py   # –¢–µ—Å—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ HTTP/SOCKS/TCP —á–µ—Ä–µ–∑ mock
    ‚îî‚îÄ‚îÄ test_geo_cache.py           # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑—ã GeoLite2
```

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (config.py)

–§–∞–π–ª `app/config.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `@dataclass(slots=True)` –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.

### –ö–ª–∞—Å—Å `Settings`

| –ü–æ–ª–µ | –¢–∏–ø | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------------------|----------|
| `db_url` | `str` | `sqlite:///app.db` | –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î |
| `github_token` | `str` | `""` | GitHub Personal Access Token |
| `github_queries` | `list[str]` | `["proxy","socks5","mtproto","shadowsocks"]` | –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –Ω–∞ GitHub |
| `github_code_pages` | `int` | `5` | –ö–æ–ª-–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ `search/code` |
| `github_repo_pages` | `int` | `5` | –ö–æ–ª-–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ `search/repositories` |
| `github_per_page` | `int` | `50` | –≠–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É (–º–∞–∫—Å. 100) |
| `github_max_blob_bytes` | `int` | `250000` | –ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä blob-—Ñ–∞–π–ª–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è |
| `source_urls` | `list[str]` | `[]` | –ü—Ä—è–º—ã–µ URL –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–ø–∏—Å–∫–∏ –ø—Ä–æ–∫—Å–∏ |
| `check_timeout_sec` | `float` | `4.0` | –¢–∞–π–º–∞—É—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ (—Å–µ–∫) |
| `max_concurrent_checks` | `int` | `100` | –ú–∞–∫—Å. –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ |
| `country_whitelist` | `list[str]` | `[]` | –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω (ISO 2-–±—É–∫–≤—ã) |
| `country_blacklist` | `list[str]` | `[]` | –ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω |
| `schedule_minutes` | `int` | `15` | –ò–Ω—Ç–µ—Ä–≤–∞–ª daemon-—Ü–∏–∫–ª–∞ (–º–∏–Ω—É—Ç—ã) |
| `telegram_bot_token` | `str` | `""` | –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ |
| `telegram_admin_id` | `int` | `0` | Telegram ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ |
| `telegram_report_minutes` | `int` | `30` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –∞–≤—Ç–æ-–æ—Ç—á—ë—Ç–æ–≤ (–º–∏–Ω—É—Ç—ã) |

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `_csv_env(name)`

–ü–∞—Ä—Å–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –∫–∞–∫ CSV-—Å—Ç—Ä–æ–∫—É:
```python
"proxy,socks5,mtproto" ‚Üí ["proxy", "socks5", "mtproto"]
```

### –°–∏–Ω–≥–ª—Ç–æ–Ω

–í –∫–æ–Ω—Ü–µ –º–æ–¥—É–ª—è —Å–æ–∑–¥–∞—ë—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç:
```python
settings = Settings()
```

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```env
DB_URL=sqlite:///app.db
GITHUB_TOKEN=ghp_xxxxxxxxxxxxx
GITHUB_QUERIES=proxy,socks5,mtproto,shadowsocks
GITHUB_CODE_PAGES=5
GITHUB_REPO_PAGES=5
GITHUB_PER_PAGE=50
GITHUB_MAX_BLOB_BYTES=250000
SOURCE_URLS=https://example.com/proxies.txt,https://other.com/list.txt
CHECK_TIMEOUT_SEC=4
MAX_CONCURRENT_CHECKS=100
COUNTRY_WHITELIST=
COUNTRY_BLACKLIST=RU,KP,IR
SCHEDULE_MINUTES=15
TELEGRAM_BOT_TOKEN=123456:ABC-DEF...
TELEGRAM_ADMIN_ID=123456789
TELEGRAM_REPORT_MINUTES=30
```

---

## –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (models.py)

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `SQLAlchemy 2.0` declarative mapping (–∫–ª–∞—Å—Å `DeclarativeBase`).

### –¢–∞–±–ª–∏—Ü–∞ `proxies` ‚Äî –º–æ–¥–µ–ª—å `Proxy`

–•—Ä–∞–Ω–∏—Ç **—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ** –ø—Ä–æ–∫—Å–∏ (unique constraint: `proxy_type + host + port`).

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| `id` | `Integer PK` | –ê–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç |
| `proxy_type` | `String(16)` | –¢–∏–ø: `http`, `https`, `socks5`, `socks4`, `mtproto`, `ss` |
| `host` | `String(255)` | IP-–∞–¥—Ä–µ—Å –∏–ª–∏ –¥–æ–º–µ–Ω |
| `port` | `Integer` | –ü–æ—Ä—Ç |
| `country` | `String(8) NULL` | ISO-–∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã (2 –±—É–∫–≤—ã) |
| `source` | `String(255)` | –û—Ç–∫—É–¥–∞ –Ω–∞–π–¥–µ–Ω (URL –∏—Å—Ç–æ—á–Ω–∏–∫–∞) |
| `is_alive` | `Boolean` | –ñ–∏–≤ –ª–∏ –ø—Ä–æ–∫—Å–∏ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø—Ä–æ–≤–µ—Ä–∫–µ |
| `latency_ms` | `Float NULL` | –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ –º—Å (NULL –µ—Å–ª–∏ –º—ë—Ä—Ç–≤) |
| `success_rate` | `Float` | –°–∫–æ–ª—å–∑—è—â–∞—è —Å—Ä–µ–¥–Ω—è—è —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ `[0..1]` |
| `score` | `Float` | –í—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ `[0..100]` |
| `last_checked_at` | `DateTime NULL` | –ö–æ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ä–∞–∑ |
| `updated_at` | `DateTime` | –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ |
| `created_at` | `DateTime` | –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ |

**–ò–Ω–¥–µ–∫—Å—ã:** `proxy_type`, `host`, `country`, `is_alive`, `score`

### –¢–∞–±–ª–∏—Ü–∞ `observations` ‚Äî –º–æ–¥–µ–ª—å `Observation`

–ñ—É—Ä–Ω–∞–ª **–∫–∞–∂–¥–æ–π** –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–∫—Å–∏ (append-only –ª–æ–≥).

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| `id` | `Integer PK` | –ê–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç |
| `proxy_type` | `String(16)` | –¢–∏–ø –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ |
| `host` | `String(255)` | IP/–¥–æ–º–µ–Ω |
| `port` | `Integer` | –ü–æ—Ä—Ç |
| `is_alive` | `Boolean` | –†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ |
| `latency_ms` | `Float NULL` | –ó–∞–¥–µ—Ä–∂–∫–∞ |
| `source` | `String(255)` | –ò—Å—Ç–æ—á–Ω–∏–∫ |
| `checked_at` | `DateTime` | –í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏ |

### –¢–∞–±–ª–∏—Ü–∞ `repo_tasks` ‚Äî –º–æ–¥–µ–ª—å `RepoTask`

–û—á–µ—Ä–µ–¥—å GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –Ω–∞ –ø–∞—Ä—Å–∏–Ω–≥ (—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ `repo_full_name`).

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| `id` | `Integer PK` | –ê–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç |
| `repo_full_name` | `String(255)` | `owner/repo` (lowercase) |
| `status` | `String(32)` | `pending` ‚Üí `processing` ‚Üí `done` / `failed` |
| `note` | `Text NULL` | –ó–∞–º–µ—Ç–∫–∞ (–Ω–∞–ø—Ä. `from_telegram_admin`) |
| `queued_at` | `DateTime` | –ö–æ–≥–¥–∞ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω –≤ –æ—á–µ—Ä–µ–¥—å |
| `updated_at` | `DateTime` | –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ |
| `last_analyzed_at` | `DateTime NULL` | –ö–æ–≥–¥–∞ –±—ã–ª –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω |

### –¢–∞–±–ª–∏—Ü–∞ `pipeline_runs` ‚Äî –º–æ–¥–µ–ª—å `PipelineRun`

–õ–æ–≥ –∑–∞–ø—É—Å–∫–æ–≤ –∫–æ–Ω–≤–µ–π–µ—Ä–∞ (–º–µ—Ç—Ä–∏–∫–∏ –∫–∞–∂–¥–æ–≥–æ —Ü–∏–∫–ª–∞).

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| `id` | `Integer PK` | –ê–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç |
| `raw_sources` | `Integer` | –°–∫–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤ —Å–æ–±—Ä–∞–Ω–æ |
| `candidates` | `Integer` | –°–∫–æ–ª—å–∫–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–æ |
| `saved` | `Integer` | –°–∫–æ–ª—å–∫–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –ë–î |
| `alive` | `Integer` | –°–∫–æ–ª—å–∫–æ –∏–∑ –Ω–∏—Ö –∂–∏–≤—ã–µ |
| `created_at` | `DateTime` | –í—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ |

---

## –ö–æ–ª–ª–µ–∫—Ç–æ—Ä—ã (collectors/)

### –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å `Collector` (base.py)

```python
class Collector(ABC):
    @abstractmethod
    async def collect(self) -> list[tuple[str, str]]:
        """Return list[(source_name, raw_text)]"""
```

–ö–∞–∂–¥—ã–π –∫–æ–ª–ª–µ–∫—Ç–æ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–æ—Ä—Ç–µ–∂–µ–π `(–∏—Å—Ç–æ—á–Ω–∏–∫, —Å—ã—Ä–æ–π_—Ç–µ–∫—Å—Ç)`.

---

### GitHubCodeCollector (github.py)

> **–°–∞–º—ã–π –≤–∞–∂–Ω—ã–π –∏ —Å–ª–æ–∂–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç** ‚Äî –≥–ª—É–±–æ–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ GitHub.

#### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```python
GitHubCodeCollector(
    token: str,              # GitHub PAT
    queries: list[str],      # –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
    code_pages: int = 5,     # –°—Ç—Ä–∞–Ω–∏—Ü code search
    repo_pages: int = 5,     # –°—Ç—Ä–∞–Ω–∏—Ü repo search
    per_page: int = 50,      # –≠–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
    max_blob_bytes: int = 250_000,  # –ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞
    extra_repos: list[str],  # –†–µ–ø–æ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ Telegram
)
```

#### –≠—Ç–∞–ø 1: –ü–æ–∏—Å–∫ –ø–æ –∫–æ–¥—É (`search/code`)

```
–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ (proxy, socks5, mtproto, shadowsocks):
  –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã (1..code_pages):
    GET https://api.github.com/search/code?q={keyword} in:file
    –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
      GET —Ñ–∞–π–ª –ø–æ API URL ‚Üí –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ base64 ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
```

**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Accept: application/vnd.github+json`
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `Bearer {token}`
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ `seen_sources` (set)
- –ö–æ–Ω—Ç–µ–Ω—Ç —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ **base64** –∏ –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è

#### –≠—Ç–∞–ø 2: –ü–æ–∏—Å–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (`search/repositories`)

```
–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞:
  –î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
    GET https://api.github.com/search/repositories?q={keyword}&sort=updated&order=desc
    –°–æ–±–∏—Ä–∞–µ–º full_name –≤—Å–µ—Ö –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ–ø–æ –≤ set
```

**–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è:** —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ `updated` ‚Äî –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å —Å–≤–µ–∂–∏–µ —Ä–µ–ø–æ.

#### –≠—Ç–∞–ø 3: –ì–ª—É–±–æ–∫–∏–π —Å–∫–∞–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (`_collect_repo_content`)

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–æ–≥–æ (–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ Telegram) —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

```
1. GET /repos/{repo}                 ‚Üí –ø–æ–ª—É—á–∏—Ç—å default_branch
2. GET /repos/{repo}/readme          ‚Üí –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å README (base64)
3. GET /repos/{repo}/git/trees/{branch}?recursive=1 ‚Üí git-–¥–µ—Ä–µ–≤–æ
4. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è blob-—Ñ–∞–π–ª–æ–≤:
   - –†–∞–∑–º–µ—Ä ‚â§ max_blob_bytes
   - –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ: .txt, .conf, .cfg, .ini, .yaml, .yml,
                  .json, .csv, .list, .md
   - –ò–õ–ò "proxy" –≤ –ø—É—Ç–∏ —Ñ–∞–π–ª–∞ (–ª—é–±–æ–π —Ä–µ–≥–∏—Å—Ç—Ä)
5. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ blob (–¥–æ 200 —à—Ç—É–∫):
   GET /repos/{repo}/git/blobs/{sha} ‚Üí –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ base64
```

#### Regex –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤

```python
TEXT_EXT_RE = re.compile(
    r"\.(txt|conf|cfg|ini|yaml|yml|json|csv|list|md)$",
    re.IGNORECASE
)
```

---

### URLListCollector (url_list.py)

–ü—Ä–æ—Å—Ç–æ–π –∫–æ–ª–ª–µ–∫—Ç–æ—Ä ‚Äî —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º URL.

```python
class URLListCollector(Collector):
    def __init__(self, urls: list[str])

    async def collect(self) -> list[tuple[str, str]]:
        # –î–ª—è –∫–∞–∂–¥–æ–≥–æ URL:
        #   GET url ‚Üí –µ—Å–ª–∏ 200, –¥–æ–±–∞–≤–ª—è–µ–º (url, text)
```

URL –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `SOURCE_URLS` –≤ `.env` (CSV).

---

## –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ç–æ—Ä (normalizer.py)

–ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø—Ä–æ–∫—Å–∏-–∞–¥—Ä–µ—Å–∞ –∏–∑ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é –Ω–∞–±–æ—Ä–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è.

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

1. **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ URI (—Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π)**:
   - `socks5://user:pass@1.2.3.4:1080`
   - `http://1.2.3.4:8080`
   - `mtproto://10.0.0.1:8443`
2. **Shadowsocks URI**:
   - `ss://base64...` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ padding, –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Ö–æ—Å—Ç –∏ –ø–æ—Ä—Ç)
3. **VMess URI**:
   - `vmess://base64...` (–ü–∞—Ä—Å–∏–Ω–≥ JSON-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ Base64-–æ–±—ë—Ä—Ç–∫–∏)
4. **JSON Configs**:
   - `{"server": "host", "server_port": port}` 
5. **Space/Tab —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ**:
   - `1.2.3.4 8080` –∏–ª–∏ `1.2.3.4\t8080`
6. **Fallback**:
   - `1.2.3.4:80` (–æ–±—ã—á–Ω–∞—è –ø–∞—Ä–∞ ip:port –±–µ–∑ —Å—Ö–µ–º—ã)

–î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ –∫–æ–º–ø–æ–∑–∏—Ç–Ω–æ–º—É –∫–ª—é—á—É `(proxy_type, host, port)`.

---

## –í–∞–ª–∏–¥–∞—Ç–æ—Ä (validator.py)

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∂–∏–≤—É—á–µ—Å—Ç—å –ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ HTTP-–∑–∞–ø—Ä–æ—Å.

### Dataclass `ValidationResult`

```python
@dataclass(slots=True)
class ValidationResult:
    candidate: ProxyCandidate
    is_alive: bool
    latency_ms: float | None
```

### –§—É–Ω–∫—Ü–∏—è `_check(candidate, timeout_sec)`

```python
proxy_url = f"{candidate.proxy_type}://{candidate.host}:{candidate.port}"
# –ü—Ä–∏–º–µ—Ä: "socks5://1.2.3.4:1080"

async with httpx.AsyncClient(proxy=proxy_url, timeout=timeout_sec) as client:
    r = await client.get("https://httpbin.org/ip")
    ok = r.status_code < 500
    latency = (time.perf_counter() - t0) * 1000
```

- **–¶–µ–ª–µ–≤—ã–µ URL:** –ó–∞–ø—Ä–æ—Å—ã –ø–µ—Ä–µ–±–∏—Ä–∞—é—Ç `https://httpbin.org/ip`, `https://ifconfig.me/ip`, `https://api.ipify.org`, `https://icanhazip.com`, `https://checkip.amazonaws.com` (fallback-—Ü–µ–ø–æ—á–∫–∞).
- **–ö—Ä–∏—Ç–µ—Ä–∏–π –∂–∏–≤—É—á–µ—Å—Ç–∏:** HTTP/TCP —É—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ status < 500 –¥–ª—è HTTP-–ø—Ä–æ–∫—Å–∏.
- **–ó–∞–º–µ—Ä latency:** `time.perf_counter()` –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
- –ü—Ä–∏ –ª—é–±–æ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–∏ ‚Üí `is_alive=False, latency_ms=None`

### –§—É–Ω–∫—Ü–∏—è `validate_many(candidates, timeout_sec, max_concurrent)`

–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ `asyncio.Semaphore`:

```python
sem = asyncio.Semaphore(max_concurrent)  # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100

async def run_one(c):
    async with sem:
        return await _check(c, timeout_sec)

return await asyncio.gather(*(run_one(c) for c in candidates))
```

---

## –ì–µ–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ (geo.py)

### –§—É–Ω–∫—Ü–∏—è `country_by_ip(ip) -> str | None`

```python
geoip2.database.Reader("GeoLite2-Country.mmdb")
# –õ–æ–∫–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥.
```

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç **–æ—Ñ—Ñ–ª–∞–π–Ω –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö GeoLite2** –æ—Ç MaxMind.
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã (–±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫ –Ω–∞ —Å–µ—Ç—å).
- –ö—ç—à–∏—Ä—É–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é Reader (Singleton lazy init).
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ISO 2-–±—É–∫–≤–µ–Ω–Ω—ã–π –∫–æ–¥ —Å—Ç—Ä–∞–Ω—ã –∏–ª–∏ `None` –ø—Ä–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–º IP.

---

## Pipeline ‚Äî –≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω–≤–µ–π–µ—Ä (pipeline.py)

–ö–ª–∞—Å—Å `Pipeline` ‚Äî —Å–µ—Ä–¥—Ü–µ —Å–∏—Å—Ç–µ–º—ã. –û—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∞ ‚Üí –ø–∞—Ä—Å–∏–Ω–≥–∞ ‚Üí –≤–∞–ª–∏–¥–∞—Ü–∏–∏ ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.

### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```python
class Pipeline:
    def __init__(self, settings: Settings):
        self.settings = settings
        self.storage = Storage(settings.db_url)
        self.storage.init_db()  # –°–æ–∑–¥–∞—ë—Ç —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
```

### –ú–µ—Ç–æ–¥ `run_once()` ‚Äî –æ–¥–∏–Ω —Ü–∏–∫–ª –∫–æ–Ω–≤–µ–π–µ—Ä–∞

```
–®–∞–≥ 1: –û—á–µ—Ä–µ–¥—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
  ‚Üí storage.get_pending_repos(limit=100)
  ‚Üí –î–ª—è –∫–∞–∂–¥–æ–≥–æ: mark_repo_status(repo, "processing")

–®–∞–≥ 2: –°–±–æ—Ä —Å—ã—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  ‚Üí GitHubCodeCollector.collect()   # –≥–ª—É–±–æ–∫–∏–π —Å–∫–∞–Ω GitHub
  ‚Üí URLListCollector.collect()       # —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ URL-—Å–ø–∏—Å–∫–æ–≤
  ‚Üí –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ raws: list[(source, text)]

–®–∞–≥ 3: –ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ–∫—Å–∏
  ‚Üí –î–ª—è –∫–∞–∂–¥–æ–≥–æ (source, text):
       parse_candidates(text, source) ‚Üí list[ProxyCandidate]

–®–∞–≥ 4: –ú–∞—Å—Å–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
  ‚Üí validate_many(candidates, timeout, max_concurrent)
  ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç: list[ValidationResult]

–®–∞–≥ 5: –ì–µ–æ-—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
  ‚Üí –î–ª—è –∫–∞–∂–¥–æ–≥–æ ValidationResult:
      1. country_by_ip(host) ‚Äî –µ—Å–ª–∏ host —ç—Ç–æ IP
      2. –§–∏–ª—å—Ç—Ä: whitelist / blacklist
      3. storage.upsert_proxy(...)

–®–∞–≥ 6: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
  ‚Üí mark_repo_status(repo, "done") –¥–ª—è –≤—Å–µ—Ö –∏–∑ –æ—á–µ—Ä–µ–¥–∏
  ‚Üí storage.record_run(raw_sources, candidates, saved, alive)
  ‚Üí –í–µ—Ä–Ω—É—Ç—å stats dict
```

### –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `_is_ip(host)`

```python
def _is_ip(host: str) -> bool:
    # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ host –≤–∞–ª–∏–¥–Ω—ã–º IP-–∞–¥—Ä–µ—Å–æ–º
    ipaddress.ip_address(host)  # ValueError –µ—Å–ª–∏ –Ω–µ—Ç
```

### –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞

```python
def run_once_sync(settings: Settings) -> dict[str, int]:
    return asyncio.run(Pipeline(settings).run_once())
```

---

## –•—Ä–∞–Ω–∏–ª–∏—â–µ (storage.py)

–ö–ª–∞—Å—Å `Storage` ‚Äî –µ–¥–∏–Ω—ã–π —Å–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

### –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```python
class Storage:
    def __init__(self, db_url: str):
        self.engine = create_engine(db_url, future=True)
```

### –ú–µ—Ç–æ–¥ `init_db()`

```python
Base.metadata.create_all(self.engine)
# –°–æ–∑–¥–∞—ë—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã, –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
```

### –ú–µ—Ç–æ–¥ `upsert_proxy(...)` ‚Äî –∫–ª—é—á–µ–≤–æ–π –º–µ—Ç–æ–¥

–õ–æ–≥–∏–∫–∞ upsert (insert or update) –¥–ª—è –ø—Ä–æ–∫—Å–∏:

```
–ï–°–õ–ò –ø—Ä–æ–∫—Å–∏ –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î (–ø–æ proxy_type+host+port):
  ‚Üí INSERT –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å
  ‚Üí success_rate = 1.0 –µ—Å–ª–∏ alive, –∏–Ω–∞—á–µ 0.0
  ‚Üí score = –≤—ã—á–∏—Å–ª–∏—Ç—å –ø–æ —Ñ–æ—Ä–º—É–ª–µ

–ï–°–õ–ò –ø—Ä–æ–∫—Å–∏ –£–ñ–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç:
  ‚Üí UPDATE:
    new_sr = old_sr * 0.8 + (1.0 –µ—Å–ª–∏ alive, –∏–Ω–∞—á–µ 0.0) * 0.2
    # –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ (EMA)
    # 80% –≤–µ—Å–∞ ‚Äî –∏—Å—Ç–æ—Ä–∏—è, 20% ‚Äî —Ç–µ–∫—É—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
  ‚Üí –û–±–Ω–æ–≤–∏—Ç—å is_alive, latency_ms, country, source, success_rate, score

–í–°–ï–ì–î–ê:
  ‚Üí INSERT –≤ observations (–ª–æ–≥ –ø—Ä–æ–≤–µ—Ä–∫–∏)
  ‚Üí COMMIT
```

### –ú–µ—Ç–æ–¥ `enqueue_repo(repo_full_name, note)` ‚Üí `(bool, str)`

```
"Owner/Repo" ‚Üí –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è ‚Üí "owner/repo"

–ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å —Å status="done"  ‚Üí (False, "already_analyzed")
–ï—Å–ª–∏ —É–∂–µ –µ—Å—Ç—å —Å –¥—Ä—É–≥–∏–º status ‚Üí (False, "already_queued")
–ï—Å–ª–∏ –Ω–µ—Ç ‚Üí INSERT (pending)    ‚Üí (True, "queued")
```

### –ú–µ—Ç–æ–¥ `get_pending_repos(limit=100)` ‚Üí `list[str]`

–í—ã–±–∏—Ä–∞–µ—Ç –Ω–µ–ø—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–ø–æ, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ `queued_at ASC`.

### –ú–µ—Ç–æ–¥ `mark_repo_status(repo, status, note)`

–û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Ä–µ–ø–æ. –ï—Å–ª–∏ `status="done"` ‚Äî —Å—Ç–∞–≤–∏—Ç `last_analyzed_at`.

### –ú–µ—Ç–æ–¥ `repo_queue_stats()` ‚Üí `dict[str, int]`

```python
{"pending": 3, "processing": 1, "done": 45, "failed": 2}
```

### –ú–µ—Ç–æ–¥ `top_alive(limit, countries)` ‚Üí `list[Proxy]`

–¢–æ–ø –∂–∏–≤—ã—Ö –ø—Ä–æ–∫—Å–∏, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ `score DESC`. –ú–æ–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —Å—Ç—Ä–∞–Ω–∞–º.

### –ú–µ—Ç–æ–¥ `dashboard_stats()` ‚Üí `dict`

–ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞:

```python
{
    "total_proxies": 1500,
    "alive_proxies": 320,
    "countries_top": [{"country": "US", "count": 80}, ...],
    "queue": {"pending": 3, "processing": 0, "done": 45, "failed": 2},
    "latest_run": {
        "raw_sources": 150, "candidates": 800,
        "saved": 600, "alive": 120, "at": "2026-02-16T..."
    },
    "observations_total": 5000  # –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
}
```

### –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–µ—Ç–æ–¥ `_score(is_alive, latency_ms, success_rate)` ‚Üí `float`

–°–º. —Ä–∞–∑–¥–µ–ª [[#–§–æ—Ä–º—É–ª–∞ —Å–∫–æ—Ä–∏–Ω–≥–∞]].

---

## –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (scheduler.py)

### –§—É–Ω–∫—Ü–∏—è `run_daemon(settings)`

```python
sched = BlockingScheduler(timezone="UTC")

def _job():
    stats = run_once_sync(settings)
    print(f"[daemon] {stats}")

sched.add_job(_job, "interval",
    minutes=settings.schedule_minutes,  # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15 –º–∏–Ω
    max_instances=1,                     # –Ω–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
    coalesce=True                        # –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ
)
_job()          # –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ —Å—Ä–∞–∑—É
sched.start()   # –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª
```

---

## –°–µ—Ä–≤–∏—Å (service.py)

### –ö–ª–∞—Å—Å `ProxyService`

–ü—Ä–æ—Å–ª–æ–π–∫–∞ –¥–ª—è –±—É–¥—É—â–µ–≥–æ API (FastAPI –∏ —Ç.–¥.)

```python
class ProxyService:
    def __init__(self, db_url: str):
        self.storage = Storage(db_url)

    def get_alive(self, limit=1000, countries=None) -> list[dict]:
        # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π —Å –¥–∞–Ω–Ω—ã–º–∏ –∂–∏–≤—ã—Ö –ø—Ä–æ–∫—Å–∏
        # –ö–∞–∂–¥—ã–π dict: type, host, port, country, latency_ms,
        #              score, success_rate, source, last_checked_at
```

---

## Telegram-–±–æ—Ç (bot.py)

### –ö–ª–∞—Å—Å `AdminBot`

Admin-only –±–æ—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Å–µ—Ä–æ–º.

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

```python
def _is_admin(self, user_id: int | None) -> bool:
    return bool(user_id) and user_id == self.settings.telegram_admin_id
```

–í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏ callback-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç `_is_admin()` –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–æ–π.

#### Inline-–º–µ–Ω—é `_menu()`

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞‚îÇ üîÑ –û–±–Ω–æ–≤–∏—Ç—å  ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üåç –°—Ç—Ä–∞–Ω—ã   ‚îÇ üß≠ –¢–æ–ø-20    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ       üì• –û—á–µ—Ä–µ–¥—å GitHub     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –ö–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞ | –û–±—Ä–∞–±–æ—Ç—á–∏–∫ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----------|----------|
| `/start` | `start_cmd` | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –º–µ–Ω—é |
| `/stats` | `stats_cmd` | –ü–æ–¥—Ä–æ–±–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ |
| `/addrepo <url>` | `addrepo_cmd` | –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–ø–æ –≤ –æ—á–µ—Ä–µ–¥—å |
| `/force_run` | `force_run_cmd` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å—Ç–∞—Ä—Ç —Ü–∏–∫–ª–∞ —Å–±–æ—Ä–∞ –ø—Ä–æ–∫—Å–∏ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å |
| `/status` | `status_cmd` | –£–∑–Ω–∞—Ç—å —Ç–µ–∫—É—â–∏–π uptime –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ü–∏–∫–ª–∞ |
| *(—Ç–µ–∫—Å—Ç —Å github.com/)* | `text_handler` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ GitHub URL |

#### Regex –¥–ª—è GitHub URL

```python
REPO_RE = re.compile(r"github\.com/([A-Za-z0-9_.-]+/[A-Za-z0-9_.-]+)")
```

**–ü—Ä–∏–º–µ—Ä—ã:**
```
"https://github.com/Owner-1/repo_2"  ‚Üí "Owner-1/repo_2"
"github.com/proxy/list"              ‚Üí "proxy/list"
```

#### Callback-–∫–Ω–æ–ø–∫–∏

| `callback_data` | –î–µ–π—Å—Ç–≤–∏–µ |
|-----------------|----------|
| `stats` | –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É |
| `refresh` | –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (—Ç–æ—Ç –∂–µ –≤—ã–∑–æ–≤) |
| `countries` | –¢–æ–ø —Å—Ç—Ä–∞–Ω –ø–æ –∂–∏–≤—ã–º –ø—Ä–æ–∫—Å–∏ |
| `queue` | –°—Ç–∞—Ç—É—Å –æ—á–µ—Ä–µ–¥–∏ GitHub |
| `top` | –¢–æ–ø-20 –∂–∏–≤—ã—Ö –ø—Ä–æ–∫—Å–∏ —Å score |

#### –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –æ—Ç—á—ë—Ç—ã

```python
app.job_queue.run_repeating(
    bot.periodic_report,
    interval=settings.telegram_report_minutes * 60,  # 30 –º–∏–Ω
    first=15  # –ø–µ—Ä–≤—ã–π –æ—Ç—á—ë—Ç —á–µ—Ä–µ–∑ 15 —Å–µ–∫
)
```

–ö–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞—à–±–æ—Ä–¥-—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.

### –§—É–Ω–∫—Ü–∏—è `run_bot(settings)`

```python
def run_bot(settings):
    # –ü—Ä–æ–≤–µ—Ä–∫–∞: —Ç–æ–∫–µ–Ω –∏ admin_id –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã
    bot = AdminBot(settings)
    app = Application.builder().token(...).build()
    # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
    app.add_handler(CommandHandler("start", bot.start_cmd))
    app.add_handler(CommandHandler("stats", bot.stats_cmd))
    app.add_handler(CommandHandler("addrepo", bot.addrepo_cmd))
    app.add_handler(CallbackQueryHandler(bot.callback_handler))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, bot.text_handler))
    # –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –æ—Ç—á—ë—Ç
    app.job_queue.run_repeating(...)
    app.run_polling(close_loop=False)
```

---

## –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (main.py)

### CLI-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (argparse)

```bash
python -m app.main run-once    # –û–¥–∏–Ω —Ü–∏–∫–ª —Å–±–æ—Ä–∞
python -m app.main daemon      # –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π —Ä–µ–∂–∏–º (–±–µ–∑ –±–æ—Ç–∞)
python -m app.main run-bot     # –ó–∞–ø—É—Å–∫ —Ç–æ–ª—å–∫–æ Telegram-–±–æ—Ç–∞
python -m app.main all-in-one  # –ë–æ—Ç –∏ –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –æ–¥–Ω–æ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º Event Loop!
```

| –ö–æ–º–∞–Ω–¥–∞ | –í—ã–∑—ã–≤–∞–µ—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|----------|
| `run-once` | `run_once_sync(settings)` | –û–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ JSON |
| `daemon` | `run_daemon(settings)` | BlockingScheduler + interval |
| `run-bot` | `run_bot(settings)` | Long-polling Telegram-–±–æ—Ç |

---

## –¢–µ—Å—Ç—ã

### `test_bot_regex.py`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ `REPO_RE` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞—Ä—Å–∏—Ç GitHub-—Å—Å—ã–ª–∫–∏:
```python
"please add https://github.com/Owner-1/repo_2 now" ‚Üí "Owner-1/repo_2"
```

### `test_normalizer.py`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç `parse_candidates` –Ω–∞ —Å–º–µ—à–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö:
```python
"socks5://1.2.3.4:1080"  ‚Üí (socks5, 1.2.3.4, 1080)
"https://8.8.8.8:443"    ‚Üí (https, 8.8.8.8, 443)
"9.9.9.9:8080"           ‚Üí (http, 9.9.9.9, 8080)  # fallback
```

### `test_storage_queue.py`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—á–µ—Ä–µ–¥—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤:
```python
enqueue("Owner/Repo") ‚Üí (True, "queued")
enqueue("owner/repo") ‚Üí (False, "already_queued")  # –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è
mark_done ‚Üí enqueue("owner/repo") ‚Üí (False, "already_analyzed")
```

---

## –ü–æ–ª–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π A: –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ (`run-once`)

```
1. main.py —Ä–∞–∑–±–∏—Ä–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç—ã ‚Üí cmd="run-once"
2. –°–æ–∑–¥–∞—ë—Ç—Å—è Pipeline(settings)
   ‚îî‚îÄ Storage(db_url) ‚Üí init_db() ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
3. Pipeline.run_once():
   ‚îÇ
   ‚îú‚îÄ 3.1 –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ pending repos –∏–∑ –ë–î
   ‚îÇ       ‚Üí mark_repo_status("processing")
   ‚îÇ
   ‚îú‚îÄ 3.2 –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö (async):
   ‚îÇ   ‚îú‚îÄ GitHubCodeCollector:
   ‚îÇ   ‚îÇ   ‚îú‚îÄ search/code –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)
   ‚îÇ   ‚îÇ   ‚îú‚îÄ search/repositories (—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ updated)
   ‚îÇ   ‚îÇ   ‚îî‚îÄ Deep scan: README + git tree + blob-—Ñ–∞–π–ª—ã
   ‚îÇ   ‚îî‚îÄ URLListCollector:
   ‚îÇ       ‚îî‚îÄ GET –∫–∞–∂–¥–æ–≥–æ URL –∏–∑ SOURCE_URLS
   ‚îÇ
   ‚îú‚îÄ 3.3 –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è:
   ‚îÇ   ‚îî‚îÄ parse_candidates(text, source) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞
   ‚îÇ       ‚îú‚îÄ PROXY_RE: socks5://..., http://..., mtproto://...
   ‚îÇ       ‚îî‚îÄ FALLBACK_RE: 1.2.3.4:8080 (–±–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞)
   ‚îÇ
   ‚îú‚îÄ 3.4 –í–∞–ª–∏–¥–∞—Ü–∏—è (async, semaphore=100):
   ‚îÇ   ‚îî‚îÄ –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞:
   ‚îÇ       GET https://httpbin.org/ip —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏
   ‚îÇ       ‚Üí is_alive (status < 500) + latency_ms
   ‚îÇ
   ‚îú‚îÄ 3.5 –ì–µ–æ + —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è + —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:
   ‚îÇ   ‚îî‚îÄ –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
   ‚îÇ       ‚îú‚îÄ country_by_ip(host) —á–µ—Ä–µ–∑ ipapi.co
   ‚îÇ       ‚îú‚îÄ Whitelist/blacklist —Ñ–∏–ª—å—Ç—Ä
   ‚îÇ       ‚îî‚îÄ storage.upsert_proxy(...)
   ‚îÇ           ‚îú‚îÄ INSERT –∏–ª–∏ UPDATE (EMA success_rate)
   ‚îÇ           ‚îî‚îÄ INSERT observation (–ª–æ–≥)
   ‚îÇ
   ‚îú‚îÄ 3.6 –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è:
   ‚îÇ   ‚îú‚îÄ mark_repo_status("done") –¥–ª—è repos –∏–∑ –æ—á–µ—Ä–µ–¥–∏
   ‚îÇ   ‚îî‚îÄ storage.record_run(stats)
   ‚îÇ
   ‚îî‚îÄ 3.7 –í—ã–≤–æ–¥ JSON –≤ stdout:
       {"raw_sources": 150, "candidates": 800, "saved": 600, "alive": 120}
```

### –°—Ü–µ–Ω–∞—Ä–∏–π B: Daemon-—Ä–µ–∂–∏–º

```
–í—Å—ë —Ç–æ –∂–µ, —á—Ç–æ –°—Ü–µ–Ω–∞—Ä–∏–π A, –Ω–æ –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ:
  1. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ ‚Äî —Å—Ä–∞–∑—É
  2. –î–∞–ª–µ–µ ‚Äî –∫–∞–∂–¥—ã–µ SCHEDULE_MINUTES –º–∏–Ω—É—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15)
  3. max_instances=1 ‚Äî –ø–æ–∫–∞ –∏–¥—ë—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ü–∏–∫–ª, –Ω–æ–≤—ã–π –Ω–µ –Ω–∞—á–Ω—ë—Ç—Å—è
  4. coalesce=True ‚Äî –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∑–∞–ø—É—Å–∫–∏ –æ–±—ä–µ–¥–∏–Ω—è—é—Ç—Å—è
```

### –°—Ü–µ–Ω–∞—Ä–∏–π C: Telegram-–±–æ—Ç

```
1. run_bot(settings) —Å–æ–∑–¥–∞—ë—Ç AdminBot
2. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ callback
3. –ó–∞–ø—É—Å–∫–∞–µ—Ç long-polling
4. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –æ—Ç—á—ë—Ç –∫–∞–∂–¥—ã–µ TELEGRAM_REPORT_MINUTES –º–∏–Ω—É—Ç
5. –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç:
   ‚îú‚îÄ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (/stats, –∫–Ω–æ–ø–∫–∞ üìä)
   ‚îú‚îÄ –í–∏–¥–µ—Ç—å —Ç–æ–ø —Å—Ç—Ä–∞–Ω –∏ —Ç–æ–ø-20 –ø—Ä–æ–∫—Å–∏
   ‚îú‚îÄ –°–º–æ—Ç—Ä–µ—Ç—å –æ—á–µ—Ä–µ–¥—å GitHub repos
   ‚îî‚îÄ –î–æ–±–∞–≤–ª—è—Ç—å repos –≤ –æ—á–µ—Ä–µ–¥—å (/addrepo –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å—Å—ã–ª–∫–æ–π)
```

---

## –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

### –í—Å–µ regex –≤ –ø—Ä–æ–µ–∫—Ç–µ

| –ú–æ–¥—É–ª—å | –ò–º—è | –ü–∞—Ç—Ç–µ—Ä–Ω | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|-----|---------|-----------|
| `normalizer.py` | `PROXY_RE` | `(socks5\|socks4\|http\|https\|mtproto\|ss)://host:port` | –ü–∞—Ä—Å–∏–Ω–≥ –ø—Ä–æ–∫—Å–∏ —Å –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º |
| `normalizer.py` | `FALLBACK_RE` | `IP:port` (–±–µ–∑ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞) | –ü–∞—Ä—Å–∏–Ω–≥ –≥–æ–ª—ã—Ö IP:port |
| `bot.py` | `REPO_RE` | `github\.com/(owner/repo)` | –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ owner/repo –∏–∑ URL |
| `github.py` | `TEXT_EXT_RE` | `.txt\|.conf\|.cfg\|...` | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é |

### –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è GitHub-–ø–æ–∏—Å–∫–∞

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: `proxy`, `socks5`, `mtproto`, `shadowsocks`

–ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `GITHUB_QUERIES` –≤ `.env`.

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –ø—Ä–æ–∫—Å–∏

| –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ | –ü—Ä–æ—Ç–æ–∫–æ–ª |
|---------------|----------|
| `http` | HTTP proxy |
| `https` | HTTPS (CONNECT) proxy |
| `socks4` | SOCKS v4 |
| `socks5` | SOCKS v5 |
| `mtproto` | MTProto (Telegram) |
| `ss` | ShadowSocks |

---

## –§–æ—Ä–º—É–ª–∞ —Å–∫–æ—Ä–∏–Ω–≥–∞

### `Storage._score(is_alive, latency_ms, success_rate)` ‚Üí `float [0..100]`

```python
if not is_alive:
    return max(0.0, success_rate * 30)
    # –ú—ë—Ä—Ç–≤—ã–π –ø—Ä–æ–∫—Å–∏: –º–∞–∫—Å. 30 –±–∞–ª–ª–æ–≤ (—Ç–æ–ª—å–∫–æ –∑–∞ –∏—Å—Ç–æ—Ä–∏—é)

latency_score = max(0.0, 1000 - (latency_ms or 1000)) / 10
# –ß–µ–º –º–µ–Ω—å—à–µ latency, —Ç–µ–º –≤—ã—à–µ –æ—á–∫–∏
# 0 ms ‚Üí 100 –æ—á–∫–æ–≤, 500 ms ‚Üí 50, 1000+ ms ‚Üí 0

return min(100.0, success_rate * 60 + latency_score)
# success_rate * 60 = –º–∞–∫—Å. 60 –æ—á–∫–æ–≤ –∑–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
# latency_score     = –º–∞–∫—Å. 100 –æ—á–∫–æ–≤ –∑–∞ —Å–∫–æ—Ä–æ—Å—Ç—å
# –ò—Ç–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ 100.0
```

### –§–æ—Ä–º—É–ª–∞ success_rate (EMA)

```python
new_sr = old_sr * 0.8 + (1.0 if is_alive else 0.0) * 0.2
```

**–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ:**
- 80% –≤–µ—Å–∞ ‚Äî –∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—à–ª—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
- 20% –≤–µ—Å–∞ ‚Äî —Ç–µ–∫—É—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- –ü–ª–∞–≤–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ –º—ë—Ä—Ç–≤—ã—Ö –ø—Ä–æ–∫—Å–∏

### –ü—Ä–∏–º–µ—Ä—ã score

| –°–æ—Å—Ç–æ—è–Ω–∏–µ | success_rate | latency_ms | Score |
|-----------|-------------|------------|-------|
| –ñ–∏–≤–æ–π, –±—ã—Å—Ç—Ä—ã–π | 1.0 | 50 ms | 60 + 95 = 100 ‚úÇÔ∏è |
| –ñ–∏–≤–æ–π, —Å—Ä–µ–¥–Ω–∏–π | 0.8 | 300 ms | 48 + 70 = 100 ‚úÇÔ∏è |
| –ñ–∏–≤–æ–π, –º–µ–¥–ª–µ–Ω–Ω—ã–π | 0.5 | 800 ms | 30 + 20 = 50 |
| –ú—ë—Ä—Ç–≤—ã–π, –±—ã–ª —Å—Ç–∞–±–∏–ª—å–Ω—ã–π | 0.9 | ‚Äî | 27 |
| –ú—ë—Ä—Ç–≤—ã–π, –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω—ã–π | 0.2 | ‚Äî | 6 |

---

## –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Ç–æ–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ GitHub API   ‚îÇ     ‚îÇ  URL Lists   ‚îÇ
‚îÇ search/code  ‚îÇ     ‚îÇ SOURCE_URLS  ‚îÇ
‚îÇ search/repos ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ git/trees    ‚îÇ            ‚îÇ
‚îÇ git/blobs    ‚îÇ            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò            ‚îÇ
       ‚îÇ                    ‚îÇ
       ‚ñº                    ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         –°—ã—Ä—ã–µ —Ç–µ–∫—Å—Ç—ã (raws)          ‚îÇ
‚îÇ   list[(source_url, raw_text)]       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     normalizer.parse_candidates()    ‚îÇ
‚îÇ   PROXY_RE + FALLBACK_RE ‚Üí dedup     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    validator.validate_many()         ‚îÇ
‚îÇ    asyncio.gather + Semaphore(100)   ‚îÇ
‚îÇ    GET httpbin.org/ip —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    geo.country_by_ip()               ‚îÇ
‚îÇ    ipapi.co ‚Üí ISO country code       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è (whitelist/blacklist)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                   ‚îÇ
                   ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    storage.upsert_proxy()            ‚îÇ
‚îÇ    ‚îú‚îÄ UPDATE existing (EMA score)    ‚îÇ
‚îÇ    ‚îî‚îÄ INSERT new + observation       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

> **–ê–≤—Ç–æ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** Antigravity AI  
> **–ü—Ä–æ–µ–∫—Ç:** `parcerproxy` ‚Äî Proxy Intelligence Pipeline
