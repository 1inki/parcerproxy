# üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ü—Ä–æ–±–ª–µ–º—ã, –î—ã—Ä—ã –∏ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ü–∞—Ä—Å–µ—Ä–∞

> –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫ [[PARSER_DESCRIPTION]].
> –ó–¥–µ—Å—å –æ–ø–∏—Å–∞–Ω—ã –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏, –Ω–µ–¥–æ—á—ë—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–∞–ª—å–Ω–æ **–ø–æ—Ä—Ç—è—Ç —Ä–∞–±–æ—Ç—É** —Å–∏—Å—Ç–µ–º—ã.

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ü—Ä–æ–±–ª–µ–º—ã (–õ–æ–º–∞—é—Ç —Ä–∞–±–æ—Ç—É)

### 1. GitHub API Rate Limit ‚Äî –ù–µ—Ç –û–±—Ä–∞–±–æ—Ç–∫–∏

**–§–∞–π–ª**: `app/collectors/github.py`, —Å—Ç—Ä–æ–∫–∏ 46-54, 78-94

> [!CAUTION]
> GitHub API –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç **30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É** –¥–ª—è Code Search –∏ **10 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É** –¥–ª—è –Ω–µ-–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö. –ü–∞—Ä—Å–µ—Ä **–Ω–∏–∫–∞–∫ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç** –æ—Ç–≤–µ—Ç `403 Forbidden` —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º `X-RateLimit-Remaining`.

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:** –ü—Ä–∏ 5 –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤–∞—Ö √ó 5 —Å—Ç—Ä–∞–Ω–∏—Ü = 25 –∑–∞–ø—Ä–æ—Å–æ–≤ —Ç–æ–ª—å–∫–æ –Ω–∞ code search. –î–æ–±–∞–≤–ª—è–µ–º repo search (25 –∑–∞–ø—Ä–æ—Å–æ–≤), –ø–ª—é—Å –∑–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤ ‚Äî –∏ –ª–∏–º–∏—Ç **–≤—ã–±–∏–≤–∞–µ—Ç—Å—è –∑–∞ –ø–µ—Ä–≤—ã–µ 2-3 –º–∏–Ω—É—Ç—ã**. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ GitHub –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `403`, –∫–æ–ª–ª–µ–∫—Ç–æ—Ä –≤–∏–¥–∏—Ç `status_code != 200`, –¥–µ–ª–∞–µ—Ç `break` –∏ **–º–æ–ª—á–∞ –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç —Å–±–æ—Ä** ‚Äî –±–µ–∑ –ª–æ–≥–æ–≤, –±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –±–µ–∑ retry.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü–∞—Ä—Å–µ—Ä —Å–æ–±–∏—Ä–∞–µ—Ç **10-20% –æ—Ç –≤–æ–∑–º–æ–∂–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç, —á—Ç–æ –ª–∏–º–∏—Ç –∏—Å—á–µ—Ä–ø–∞–Ω.
- –ù–µ—Ç exponential backoff, –Ω–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è `X-RateLimit-Reset`.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å —á—Ç–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ `X-RateLimit-Remaining` / `X-RateLimit-Reset` –∏ `asyncio.sleep()` –ø–µ—Ä–µ–¥ –∏—Å—á–µ—Ä–ø–∞–Ω–∏–µ–º –ª–∏–º–∏—Ç–∞. –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è.

---

### 2. –í–∞–ª–∏–¥–∞—Ç–æ—Ä –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¢–æ–ª—å–∫–æ HTTP ‚Äî socks5/mtproto/ss –ù–µ–≤–∞–ª–∏–¥–Ω—ã

**–§–∞–π–ª**: `app/validator.py`, —Å—Ç—Ä–æ–∫–∏ 19-31

> [!CAUTION]
> –í–∞–ª–∏–¥–∞—Ç–æ—Ä –ø—ã—Ç–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `httpx.AsyncClient(proxy=proxy_url)` –¥–ª—è **–≤—Å–µ—Ö** —Ç–∏–ø–æ–≤ –ø—Ä–æ–∫—Å–∏, –≤–∫–ª—é—á–∞—è `socks5`, `socks4`, `mtproto` –∏ `ss` (shadowsocks). –ù–æ `httpx` **–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç** SOCKS-–ø—Ä–æ–∫—Å–∏ –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `httpx-socks`, –∞ `mtproto` –∏ `ss` ‚Äî —ç—Ç–æ –≤–æ–æ–±—â–µ **–Ω–µ HTTP-–ø—Ä–æ–∫—Å–∏**.

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –í—Å–µ `socks5://`, `socks4://`, `mtproto://`, `ss://` –ø—Ä–æ–∫—Å–∏ **–≤—Å–µ–≥–¥–∞ –ø–∞–¥–∞—é—Ç** –Ω–∞ —ç—Ç–∞–ø–µ –ø—Ä–æ–≤–µ—Ä–∫–∏.
- –û–Ω–∏ –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ `is_alive = False`, —Ö–æ—Ç—è –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∏–º–∏.
- –í –±–∞–∑—É –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ª–æ–∂–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- **–í—Å—è —Ä–∞–±–æ—Ç–∞** –ø–æ –ø–æ–∏—Å–∫—É SOCKS/MTProto/Shadowsocks –ø—Ä–æ–∫—Å–∏ **–±–µ—Å–ø–æ–ª–µ–∑–Ω–∞** ‚Äî –æ–Ω–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–æ–π–¥—É—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é.
- –£—á–∏—Ç—ã–≤–∞—è, —á—Ç–æ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî `socks5, mtproto, shadowsocks` ‚Äî –ø—Ä–∏–º–µ—Ä–Ω–æ **3/4 —Ü–µ–ª–µ–≤—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è** –∫–∞–∫ "–º—ë—Ä—Ç–≤—ã–µ".

**–†–µ—à–µ–Ω–∏–µ:** –î–ª—è SOCKS ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `httpx-socks` –∏–ª–∏ `aiohttp` —Å `aiohttp-socks`. –î–ª—è MTProto/Shadowsocks ‚Äî –ø—Ä–æ–≤–µ—Ä—è—Ç—å TCP-connectivity –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–æ–∫–µ—Ç–∞ (`asyncio.open_connection`).

---

### 3. –í—Å–µ –ó–∞–ø—Ä–æ—Å—ã –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ ‚Äî –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ü–æ—Ç–µ—Ä—è –°–∫–æ—Ä–æ—Å—Ç–∏

**–§–∞–π–ª**: `app/collectors/github.py`, —Å—Ç—Ä–æ–∫–∏ 46-73 –∏ 97-98; `app/collectors/url_list.py`, —Å—Ç—Ä–æ–∫–∏ 18-21

> [!WARNING]
> –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–¥—ë—Ç **—Å—Ç—Ä–æ–≥–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ**: –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –∫ GitHub API –∂–¥—ë—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ. –ê `URLListCollector` —Å–∫–∞—á–∏–≤–∞–µ—Ç –≤—Å–µ URL **–æ–¥–∏–Ω –∑–∞ –¥—Ä—É–≥–∏–º**.

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ü—Ä–∏ —Å—Ä–µ–¥–Ω–µ–º –æ—Ç–≤–µ—Ç–µ GitHub API = 200ms –∏ 100+ –∑–∞–ø—Ä–æ—Å–∞—Ö, —Ç–æ–ª—å–∫–æ —Ñ–∞–∑–∞ —Å–±–æ—Ä–∞ –∑–∞–Ω–∏–º–∞–µ—Ç **20+ —Å–µ–∫—É–Ω–¥**.
- `URLListCollector` —Å 10 URL-–∞–º–∏ –ø—Ä–∏ —Ç–∞–π–º–∞—É—Ç–µ 10 —Å–µ–∫ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å **–¥–æ 100 —Å–µ–∫—É–Ω–¥**.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `asyncio.gather()` –∏–ª–∏ `asyncio.Semaphore` –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ —Å–±–æ—Ä–∞. –í–∞–ª–∏–¥–∞—Ç–æ—Ä —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç—É —Å—Ö–µ–º—É ‚Äî –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—É—é –≤ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞—Ö.

---

### 4. Geo-API –û–¥–∏–Ω –ó–∞–ø—Ä–æ—Å –Ω–∞ IP ‚Äî –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ë—É—Ç—ã–ª–æ—á–Ω–æ–µ –ì–æ—Ä–ª–æ

**–§–∞–π–ª**: `app/geo.py` ‚Üí –≤—ã–∑–æ–≤ –∏–∑ `app/pipeline.py`, —Å—Ç—Ä–æ–∫–∏ 60-62

> [!WARNING]
> –î–ª—è **–∫–∞–∂–¥–æ–≥–æ** –≤–∞–ª–∏–¥–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è **—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π** (–≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ü–∏–∫–ª–∞) HTTP-–∑–∞–ø—Ä–æ—Å –∫ `https://ipapi.co/{ip}/country/`.

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
- –ü—Ä–∏ 500 –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞–Ω–¥–∏–¥–∞—Ç–∞—Ö ‚Äî —ç—Ç–æ **500 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤**.
- `ipapi.co` –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç **1000 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å** –¥–ª—è –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ —Ç–∞—Ä–∏—Ñ–∞.
- –ü–æ—Å–ª–µ –∏—Å—á–µ—Ä–ø–∞–Ω–∏—è –ª–∏–º–∏—Ç–∞ –≤—Å–µ country –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `None`.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –≠—Ç–∞–ø –≥–µ–æ-–ª–æ–∫–∞—Ü–∏–∏ –∑–∞–Ω–∏–º–∞–µ—Ç **–Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç**.
- –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ª–∏–º–∏—Ç API –≤—ã–±–∏–≤–∞–µ—Ç—Å—è –∑–∞ 2-3 –∑–∞–ø—É—Å–∫–∞.
- –ï—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω `COUNTRY_WHITELIST`, –∞ –≥–µ–æ-API —Å–ª–æ–º–∞–ª—Å—è ‚Äî **–≤—Å–µ –ø—Ä–æ–∫—Å–∏ –±—É–¥—É—Ç –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã** (country = None, –∏ –æ–Ω –Ω–µ –≤ whitelist).

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é GeoIP –±–∞–∑—É (MaxMind GeoLite2) –≤–º–µ—Å—Ç–æ API. –ò–ª–∏ —Ö–æ—Ç—è –±—ã –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å IP ‚Üí —Å—Ç—Ä–∞–Ω–∞.

---

## üü° –°–µ—Ä—å—ë–∑–Ω—ã–µ –ù–µ–¥–æ—á—ë—Ç—ã (–°–Ω–∏–∂–∞—é—Ç –ö–∞—á–µ—Å—Ç–≤–æ)

### 5. SQLite + –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –û–ø–µ—Ä–∞—Ü–∏–∏ ‚Äî –ü–ª–æ—Ö–æ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è

**–§–∞–π–ª**: `app/storage.py` ‚Äî –≤—Å–µ –º–µ—Ç–æ–¥—ã

–ö–∞–∂–¥—ã–π `upsert_proxy` –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç **–Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é** –∏ –¥–µ–ª–∞–µ—Ç **–æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–º–º–∏—Ç**. –ü—Ä–∏ 500 –ø—Ä–æ–∫—Å–∏ ‚Äî —ç—Ç–æ 500 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π. SQLite –ø–ª–æ—Ö–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —á–∞—Å—Ç—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏.

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–±–∏—Ä–∞—Ç—å batch –∏ –¥–µ–ª–∞—Ç—å –æ–¥–∏–Ω `session.add_all()` + `session.commit()`.

---

### 6. –ù–µ—Ç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äî –í–æ–æ–±—â–µ –ù–∏–∫–∞–∫–æ–≥–æ

**–í—Å–µ —Ñ–∞–π–ª—ã**

> [!IMPORTANT]
> –í–æ –≤—Å—ë–º –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `print()` (–æ–¥–∏–Ω —Ä–∞–∑ –≤ `scheduler.py`). –ù–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `logging.*`.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Ç–ª–∞–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.
- –ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–º, –∫–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã —É–ø–∞–ª–∏, —Å–∫–æ–ª—å–∫–æ –±—ã–ª–æ rate-limit –æ—à–∏–±–æ–∫, –∫–∞–∫–∏–µ –ø—Ä–æ–∫—Å–∏ –ø—Ä–æ–≤–µ—Ä—è–ª–∏—Å—å.
- –í—Å–µ `except Exception: continue` **–º–æ–ª—á–∞ –≥–ª–æ—Ç–∞—é—Ç –æ—à–∏–±–∫–∏**.

---

### 7. –ù–µ—Ç Retry-–ª–æ–≥–∏–∫–∏ –ù–∏–≥–¥–µ

**–§–∞–π–ª—ã**: `app/collectors/github.py`, `app/collectors/url_list.py`, `app/geo.py`

–õ—é–±–æ–π —Å–µ—Ç–µ–≤–æ–π –∑–∞–ø—Ä–æ—Å, –≤–µ—Ä–Ω—É–≤—à–∏–π –æ—à–∏–±–∫—É –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç, **–ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è** (`continue`). –ù–µ—Ç –Ω–∏ –æ–¥–Ω–æ–≥–æ retry —Å backoff. –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–±–æ–∏ —Å–µ—Ç–∏ = –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

---

### 8. Normalizer –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–µ –§–æ—Ä–º–∞—Ç—ã

**–§–∞–π–ª**: `app/normalizer.py`, —Å—Ç—Ä–æ–∫–∏ 7-11

–¢–µ–∫—É—â–∏–π RegEx –ª–æ–≤–∏—Ç —Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç—ã:
- `protocol://host:port`
- `ip:port` (fallback)

**–ß—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è:**
- `user:password@host:port` (–ø—Ä–æ–∫—Å–∏ —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π).
- `ss://base64...` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç Shadowsocks URI).
- `vmess://base64...` (—Ñ–æ—Ä–º–∞—Ç V2Ray).
- –ü—Ä–æ–∫—Å–∏, –∑–∞–ø–∏—Å–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª—ã –∏–ª–∏ —Ç–∞–±—É–ª—è—Ü–∏–∏: `host port` –∏–ª–∏ `host\tport`.
- JSON-—Ñ–æ—Ä–º–∞—Ç—ã: `{"server": "1.2.3.4", "port": 1080}`.

---

### 9. –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –ù–∞–≤—Å–µ–≥–¥–∞

**–§–∞–π–ª**: `app/storage.py`, —Å—Ç—Ä–æ–∫–∏ 78-88

–ö–∞–∫ —Ç–æ–ª—å–∫–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å `"done"` ‚Äî –æ–Ω **–Ω–∞–≤—Å–µ–≥–¥–∞** –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞. –ú–µ—Ç–æ–¥ `enqueue_repo` –≤–µ—Ä–Ω—ë—Ç `"already_analyzed"`.

**–ü—Ä–æ–±–ª–µ–º–∞:** –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è. –ù–æ–≤—ã–µ –ø—Ä–æ–∫—Å–∏-–ª–∏—Å—Ç—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è. –ù–æ –ø–∞—Ä—Å–µ—Ä –∏—Ö **–±–æ–ª—å—à–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —É–≤–∏–¥–∏—Ç**.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å TTL (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑—Ä–µ—à–∏—Ç—å –ø–µ—Ä–µ-—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞) –∏–ª–∏ –∫–Ω–æ–ø–∫—É –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ-—Å–∫–∞–Ω–∞.

---

### 10. `datetime.utcnow()` ‚Äî Deprecated –∏ –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

**–§–∞–π–ª—ã**: `app/storage.py`, `app/models.py`

`datetime.utcnow()` –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ (naive datetime). –í Python 3.12+ —ç—Ç–æ **deprecated**. –ú–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –±–∞–≥–∏ –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å timezone-aware datetime.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `datetime.now(datetime.timezone.utc)`.

---

## üü† –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

### 11. –ë–æ—Ç –∏ –ü–∞—Ä—Å–µ—Ä ‚Äî –î–≤–∞ –û—Ç–¥–µ–ª—å–Ω—ã—Ö –ü—Ä–æ—Ü–µ—Å—Å–∞ –ë–µ–∑ –°–≤—è–∑–∏

**–§–∞–π–ª**: `app/main.py`

–ö–æ–º–∞–Ω–¥—ã `run-bot` –∏ `daemon` –∑–∞–ø—É—Å–∫–∞—é—Ç **–¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞**. –ë–æ—Ç –Ω–µ –º–æ–∂–µ—Ç:
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ü–∏–∫–ª –ø–∞—Ä—Å–∏–Ω–≥–∞.
- –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/–ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–∞—Ä—Å–µ—Ä.
- –ü–æ–ª—É—á–∞—Ç—å real-time —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ü–∏–∫–ª–∞.

---

### 12. –¢–µ—Å—Ç—ã ‚Äî –ü–æ–∫—Ä—ã—Ç–∏–µ –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ

**–ü–∞–ø–∫–∞**: `tests/`

–í—Å–µ–≥–æ **3 —Ç–µ—Å—Ç–∞**, –∏ —Ç–µ ‚Äî —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –Ω–∞ –ø—Ä–æ—Å—Ç–µ–π—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- RegEx –¥–ª—è –±–æ—Ç–∞ (1 —Ç–µ—Å—Ç)
- normalizer (1 —Ç–µ—Å—Ç)
- –û—á–µ—Ä–µ–¥—å –≤ storage (1 —Ç–µ—Å—Ç)

**–ù–µ –ø–æ–∫—Ä—ã—Ç—ã:**
- Pipeline (–≤–æ–æ–±—â–µ)
- GitHub collector (–≤–æ–æ–±—â–µ)
- –í–∞–ª–∏–¥–∞—Ç–æ—Ä (–≤–æ–æ–±—â–µ)
- Geo-–º–æ–¥—É–ª—å (–≤–æ–æ–±—â–µ)
- Edge-cases –≤ normalizer (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω happy-path)

---

### 13. –ù–µ—Ç –û—á–∏—Å—Ç–∫–∏ –ú—ë—Ä—Ç–≤—ã—Ö –ü—Ä–æ–∫—Å–∏

**–§–∞–π–ª**: `app/storage.py`

–ü—Ä–æ–∫—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –Ω–∞–π–¥–µ–Ω—ã, –Ω–æ **–º–µ—Ä—Ç–≤—ã —É–∂–µ –º–µ—Å—è—Ü–∞–º–∏**, –æ—Å—Ç–∞—é—Ç—Å—è –≤ –±–∞–∑–µ –Ω–∞–≤—Å–µ–≥–¥–∞. –¢–∞–±–ª–∏—Ü–∞ `observations` —Ä–∞—Å—Ç—ë—Ç –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π. –ù–µ—Ç TTL, –Ω–µ—Ç —Ä–æ—Ç–∞—Ü–∏–∏, –Ω–µ—Ç –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏.

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ:** –ë–∞–∑–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ —Ä–∞—Å—Ç—ë—Ç, –∑–∞–ø—Ä–æ—Å—ã –∑–∞–º–µ–¥–ª—è—é—Ç—Å—è.

---

### 14. `httpbin.org` –ö–∞–∫ –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π Endpoint –¥–ª—è –ü—Ä–æ–≤–µ—Ä–∫–∏

**–§–∞–π–ª**: `app/validator.py`, —Å—Ç—Ä–æ–∫–∞ 26

> [!WARNING]
> –ï—Å–ª–∏ `httpbin.org` –ª–µ–∂–∏—Ç, **–æ–±–Ω–æ–≤–∏—Ç—Å—è –í–°–Ø –±–∞–∑–∞** ‚Äî –≤—Å–µ –ø—Ä–æ–∫—Å–∏ –±—É–¥—É—Ç –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ –º—ë—Ä—Ç–≤—ã–µ.

–ù–µ—Ç fallback-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤. –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ endpoint-–∞, –∞ –Ω–µ –ø—Ä–æ–∫—Å–∏.

---

## üìä –°–≤–æ–¥–Ω–∞—è –¢–∞–±–ª–∏—Ü–∞ –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏

| # | –ü—Ä–æ–±–ª–µ–º–∞ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –í–ª–∏—è–Ω–∏–µ |
|---|---------|-------------|---------|
| 1 | GitHub Rate Limit –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–∞—è | –°–±–æ—Ä 10-20% –¥–∞–Ω–Ω—ã—Ö |
| 2 | SOCKS/MTProto/SS –Ω–µ–≤–∞–ª–∏–¥–∏—Ä—É–µ–º—ã | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–∞—è | 75% —Ü–µ–ª–µ–≤—ã—Ö –ø—Ä–æ–∫—Å–∏ –æ—Ç–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è |
| 3 | –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–∞—è | –¶–∏–∫–ª –∑–∞–Ω–∏–º–∞–µ—Ç –º–∏–Ω—É—Ç—ã –≤–º–µ—Å—Ç–æ —Å–µ–∫—É–Ω–¥ |
| 4 | Geo-API –±—É—Ç—ã–ª–æ—á–Ω–æ–µ –≥–æ—Ä–ª–æ | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–∞—è | –õ–∏–º–∏—Ç API –∏ –∑–∞–º–µ–¥–ª–µ–Ω–∏–µ |
| 5 | SQLite –±–µ–∑ batch | üü° –°–µ—Ä—å—ë–∑–Ω–∞—è | –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ |
| 6 | –ù–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | üü° –°–µ—Ä—å—ë–∑–Ω–∞—è | –ù–µ–≤–æ–∑–º–æ–∂–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞ |
| 7 | –ù–µ—Ç retry-–ª–æ–≥–∏–∫–∏ | üü° –°–µ—Ä—å—ë–∑–Ω–∞—è | –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–±–æ—è—Ö |
| 8 | Normalizer –Ω–µ–ø–æ–ª–Ω—ã–π | üü° –°–µ—Ä—å—ë–∑–Ω–∞—è | –ü—Ä–æ–ø—É—Å–∫ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø—Ä–æ–∫—Å–∏ |
| 9 | Repo –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞ | üü° –°–µ—Ä—å—ë–∑–Ω–∞—è | –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ |
| 10 | `datetime.utcnow()` deprecated | üü† –£–º–µ—Ä–µ–Ω–Ω–∞—è | –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏ |
| 11 | –ë–æ—Ç/–ø–∞—Ä—Å–µ—Ä –Ω–µ —Å–≤—è–∑–∞–Ω—ã | üü† –£–º–µ—Ä–µ–Ω–Ω–∞—è | –ù–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ |
| 12 | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã | üü† –£–º–µ—Ä–µ–Ω–Ω–∞—è | –†–∏—Å–∫ —Ä–µ–≥—Ä–µ—Å—Å–∏–π |
| 13 | –ù–µ—Ç –æ—á–∏—Å—Ç–∫–∏ –±–∞–∑—ã | üü† –£–º–µ—Ä–µ–Ω–Ω–∞—è | –†–æ—Å—Ç –±–∞–∑—ã –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π |
| 14 | –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π endpoint –ø—Ä–æ–≤–µ—Ä–∫–∏ | üü° –°–µ—Ä—å—ë–∑–Ω–∞—è | –õ–æ–∂–Ω–∞—è "—Å–º–µ—Ä—Ç—å" –≤—Å–µ—Ö –ø—Ä–æ–∫—Å–∏ |

---

> **–°–º. —Ç–∞–∫–∂–µ:** [[PARSER_DESCRIPTION]] ‚Äî –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ –ø–∞—Ä—Å–µ—Ä–∞.
